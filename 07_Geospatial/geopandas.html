<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.3.450">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Data Science Notes - GeoPandas</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>


<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" integrity="sha512-c3Nl8+7g4LMSTdrm621y7kf9v3SDPnhxLNhcjFJbKECVnmZHTdo+IRO05sNLTH/D3vA6u1X32ehoLC7WFVdheg==" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
<script type="application/javascript">define('jquery', [],function() {return window.jQuery;})</script>


<link rel="stylesheet" href="../styles.css">
<meta property="og:title" content="Data Science Notes - GeoPandas">
<meta property="og:description" content="">
<meta property="og:image" content="https://data-science-notes.henrydashwood.com/data-science-notes/07_Geospatial/01_geopandas_files/figure-html/cell-11-output-1.png">
<meta property="og:site-name" content="Data Science Notes">
<meta property="og:image:height" content="493">
<meta property="og:image:width" content="640">
<meta name="twitter:title" content="Data Science Notes - GeoPandas">
<meta name="twitter:description" content="">
<meta name="twitter:image" content="https://data-science-notes.henrydashwood.com/data-science-notes/07_Geospatial/01_geopandas_files/figure-html/cell-11-output-1.png">
<meta name="twitter:image-height" content="493">
<meta name="twitter:image-width" content="640">
<meta name="twitter:card" content="summary_large_image">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Data Science Notes</span>
    </a>
  </div>
        <div class="quarto-navbar-tools ms-auto">
</div>
          <div id="quarto-search" class="" title="Search"></div>
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav">
    <div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
      <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../07_Geospatial/geopandas.html">Geospatial</a></li><li class="breadcrumb-item"><a href="../07_Geospatial/geopandas.html">GeoPandas</a></li></ol></nav>
      <a class="flex-grow-1" role="button" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
      </a>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Data Science Notes</span></a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../imbalanced_data.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Imbalanced Data</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true">
 <span class="menu-text">Statistics</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../00_Statistics/statistics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Statistics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../00_Statistics/linear_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Linear Regression</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true">
 <span class="menu-text">General_Concepts</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01_General_Concepts/metrics.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Metrics</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../01_General_Concepts/loss_functions.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Loss Functions</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true">
 <span class="menu-text">Logistic_Regression</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../04_Logistic_Regression/logistic_regression.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Logistic Regression</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true">
 <span class="menu-text">Interpretability</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-4" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-4" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_Interpretability/feature_importance.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Feature Importance</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_Interpretability/psi.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Population Stability Index (PSI)</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_Interpretability/decile_analysis.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Decile Analysis</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_Interpretability/partial_dependence.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Partial Dependence Plots</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../05_Interpretability/ale_plots.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">ALE PLot</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true">
 <span class="menu-text">Computer_Vision</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-5" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-5" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06_Computer_Vision/opencv.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">OpenCV</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../06_Computer_Vision/02_image_transforms.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Image Transforms</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true">
 <span class="menu-text">Geospatial</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-6" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-6" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_Geospatial/geopandas.html" class="sidebar-item-text sidebar-link active">
 <span class="menu-text">GeoPandas</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_Geospatial/interactive_folium.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Interactive Maps with Folium</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_Geospatial/geocoding_and_joining.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Manipulating Geospatial Data</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_Geospatial/shapely.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Shapely</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../07_Geospatial/gdal.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">GDAL</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true">
 <span class="menu-text">Decision_Optimisation</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-7" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-7" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08_Decision_Optimisation/profit_curves.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Profit Curves</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08_Decision_Optimisation/decision_opt_continuous_outcomes.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Decision Optimisation for Continuous Outcomes</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08_Decision_Optimisation/dynamic_decision_opt.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Simulation for Dynamic Decision Optimisation</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../08_Decision_Optimisation/drift.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Concept Drift and How Things Go Wrong</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true">
 <span class="menu-text">Calculus</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-8" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-8" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Calculus/chain_rule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Chain Rule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Calculus/product_rule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Product Rule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Calculus/quotient_rule.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Quotient Rule</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Calculus/partial_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Partial Derivatives</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Calculus/directional_derivatives.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Directional Derivatives</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true">
 <span class="menu-text">Data Science From Scratch</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-9" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-9" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Data Science From Scratch/gradient_descent.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Gradient Descent</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true">
 <span class="menu-text">Gradient Boosting</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-10" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-10" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Gradient Boosting/rossman_xgboost.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">XGBoost</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true">
 <span class="menu-text">Plotting</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-11" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-11" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Plotting/matplotlib.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Matplotlib</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true">
 <span class="menu-text">Random Forests</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-12" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-12" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Random Forests/random_forest.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Random Forest</span></a>
  </div>
</li>
      </ul>
  </li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true">
 <span class="menu-text">Statistical Rethinking</span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-13" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-13" class="collapse list-unstyled sidebar-section depth1 show">  
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../Statistical Rethinking/chapter1.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Baysian Data Analysis</span></a>
  </div>
</li>
      </ul>
  </li>
    </ul>
    </div>
</nav>
<div id="quarto-sidebar-glass" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar,#quarto-sidebar-glass"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#coordinate-systems" id="toc-coordinate-systems" class="nav-link active" data-scroll-target="#coordinate-systems">Coordinate Systems</a></li>
  </ul>
<div class="toc-actions"><div><i class="bi bi-github"></i></div><div class="action-links"><p><a href="https://github.com/HenryDashwood/data-science-notes/issues/new" class="toc-action">Report an issue</a></p></div></div></nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">GeoPandas</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<!-- WARNING: THIS FILE WAS AUTOGENERATED! DO NOT EDIT! -->
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> pathlib <span class="im">import</span> Path</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> geopandas <span class="im">as</span> gpd</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> matplotlib.pyplot <span class="im">as</span> plt</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> pandas <span class="im">as</span> pd</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="im">from</span> shapely.geometry <span class="im">import</span> LineString</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a>pd.set_option(<span class="st">"display.max_columns"</span>, <span class="va">None</span>)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"figure.facecolor"</span>] <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)  <span class="co"># RGBA tuple with alpha=0</span></span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>plt.rcParams[<span class="st">"axes.facecolor"</span>] <span class="op">=</span> (<span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">1</span>, <span class="dv">0</span>)  <span class="co"># RGBA tuple with alpha=0</span></span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>PROJECT_ROOT <span class="op">=</span> Path.cwd().parent.parent</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>lands_data <span class="op">=</span> gpd.read_file(<span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/DEC_lands/DEC_lands/DEC_lands.shp"</span>)</span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>POI_data <span class="op">=</span> gpd.read_file(</span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/DEC_pointsinterest/DEC_pointsinterest/Decptsofinterest.shp"</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>roads_trails <span class="op">=</span> gpd.read_file(</span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/DEC_roadstrails/DEC_roadstrails/Decroadstrails.shp"</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>counties <span class="op">=</span> gpd.read_file(</span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/NY_county_boundaries/NY_county_boundaries/NY_county_boundaries.shp"</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Every GeoDataFrame contains a special <code>geometry</code> column.</p>
<p>While this column can contain a variety of different datatypes, each entry will typically be a Point, LineString, or Polygon. These three types of geometric objects have built-in attributes that you can use to quickly analyze the dataset.</p>
<p>For instance, you can get the x- and y-coordinates of a Point from the x and y attributes, respectively.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>POI_data[<span class="st">"geometry"</span>].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>0    POINT (505138.696 4649388.247)
1    POINT (333481.874 4692737.800)
2    POINT (525210.784 4833837.295)
3    POINT (231909.125 4712818.500)
4    POINT (193656.734 4679632.500)
Name: geometry, dtype: geometry</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>POI_data[<span class="st">"geometry"</span>].x.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>0    505138.696169
1    333481.873865
2    525210.783740
3    231909.124843
4    193656.734407
dtype: float64</code></pre>
</div>
</div>
<p>And, you can get the length of a LineString from the length attribute.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a>roads_trails[<span class="st">"geometry"</span>].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>0    LINESTRING (511367.312 4804744.000, 511442.406...
1    LINESTRING (512806.962 4804560.806, 512796.625...
2    MULTILINESTRING ((515866.032 4804650.001, 5158...
3    LINESTRING (533975.501 4796126.500, 533992.812...
4    LINESTRING (531496.700 4799892.919, 531482.375...
Name: geometry, dtype: geometry</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a>roads_trails[<span class="st">"geometry"</span>].length.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>0     1577.112643
1      945.366235
2     3853.119292
3    10485.458536
4     1432.490031
dtype: float64</code></pre>
</div>
</div>
<p>Or, you can get the area of a Polygon from the area attribute.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>lands_data[<span class="st">"geometry"</span>].head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>0    POLYGON ((486093.245 4635308.586, 486787.235 4...
1    POLYGON ((491931.514 4637416.256, 491305.424 4...
2    POLYGON ((486000.287 4635834.453, 485007.550 4...
3    POLYGON ((541716.775 4675243.268, 541217.579 4...
4    POLYGON ((583896.043 4909643.187, 583891.200 4...
Name: geometry, dtype: geometry</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a>lands_data[<span class="st">"geometry"</span>].area.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>0    2.990365e+06
1    1.143940e+06
2    9.485476e+05
3    1.822293e+06
4    2.821959e+05
dtype: float64</code></pre>
</div>
</div>
<p>The geometry data can be displayed by calling the plot method displayed when we call the <code>plot()</code> method.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a>wild_lands <span class="op">=</span> lands_data.loc[lands_data[<span class="st">"CLASS"</span>].isin([<span class="st">"WILD FOREST"</span>, <span class="st">"WILDERNESS"</span>])].copy()</span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a>campsites <span class="op">=</span> POI_data.loc[POI_data[<span class="st">"ASSET"</span>] <span class="op">==</span> <span class="st">"PRIMITIVE CAMPSITE"</span>].copy()</span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a>trails <span class="op">=</span> roads_trails.loc[roads_trails[<span class="st">"ASSET"</span>] <span class="op">==</span> <span class="st">"FOOT TRAIL"</span>].copy()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a>counties.plot(color<span class="op">=</span><span class="st">"none"</span>, edgecolor<span class="op">=</span><span class="st">"grey"</span>, zorder<span class="op">=</span><span class="dv">3</span>, ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"County"</span>)</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a>wild_lands.plot(color<span class="op">=</span><span class="st">"lightgreen"</span>, ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"Wild lands"</span>)</span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a>campsites.plot(color<span class="op">=</span><span class="st">"maroon"</span>, markersize<span class="op">=</span><span class="dv">2</span>, ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"Campsites"</span>)</span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>trails.plot(color<span class="op">=</span><span class="st">"black"</span>, markersize<span class="op">=</span><span class="dv">1</span>, ax<span class="op">=</span>ax, label<span class="op">=</span><span class="st">"Trails"</span>)</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="01_geopandas_files/figure-html/cell-11-output-1.png" class="img-fluid"></p>
</div>
</div>
<section id="coordinate-systems" class="level2">
<h2 class="anchored" data-anchor-id="coordinate-systems">Coordinate Systems</h2>
<p>Map projections are the ways the 3D world can be represented on a 2D surface. They can’t be 100% accurate. Each projection distorts the surface of the Earth in some way, while retaining some useful property. For instance:</p>
<ul>
<li>The equal-area projections (like “Lambert Cylindrical Equal Area”, or “Africa Albers Equal Area Conic”) preserve area. This is a good choice, if you’d like to calculate the area of a country or city, for example.</li>
<li>The equidistant projections (like “Azimuthal Equidistant projection”) preserve distance. This would be a good choice for calculating flight distance.</li>
</ul>
<p>We use a coordinate reference system (CRS) to show how the projected points correspond to real locations on Earth.</p>
<p>When we create a GeoDataFrame from a shapefile, the CRS is already imported for us:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a>world.crs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Geographic 2D CRS: EPSG:4326&gt;
Name: WGS 84
Axis Info [ellipsoidal]:
- Lat[north]: Geodetic latitude (degree)
- Lon[east]: Geodetic longitude (degree)
Area of Use:
- name: World.
- bounds: (-180.0, -90.0, 180.0, 90.0)
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a>regions <span class="op">=</span> gpd.read_file(<span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/ghana/ghana/Regions/Map_of_Regions_in_Ghana.shp"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a>regions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ashanti</td>
<td>POLYGON ((686446.075 842986.894, 686666.193 84...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Brong Ahafo</td>
<td>POLYGON ((549970.457 968447.094, 550073.003 96...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Central</td>
<td>POLYGON ((603176.584 695877.238, 603248.424 69...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Eastern</td>
<td>POLYGON ((807307.254 797910.553, 807311.908 79...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Greater Accra</td>
<td>POLYGON ((858081.638 676424.913, 858113.115 67...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Northern</td>
<td>POLYGON ((818287.468 1185632.455, 818268.664 1...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Upper East</td>
<td>POLYGON ((811994.328 1230449.528, 812004.699 1...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Upper West</td>
<td>POLYGON ((658854.315 1220818.656, 659057.210 1...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Volta</td>
<td>POLYGON ((899718.788 875120.098, 899564.444 87...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Western</td>
<td>POLYGON ((490349.315 771271.143, 490530.091 77...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a>regions.crs</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<pre><code>&lt;Projected CRS: EPSG:32630&gt;
Name: WGS 84 / UTM zone 30N
Axis Info [cartesian]:
- E[east]: Easting (metre)
- N[north]: Northing (metre)
Area of Use:
- name: Between 6°W and 0°W, northern hemisphere between equator and 84°N, onshore and offshore. Algeria. Burkina Faso. Côte' Ivoire (Ivory Coast). Faroe Islands - offshore. France. Ghana. Gibraltar. Ireland - offshore Irish Sea. Mali. Mauritania. Morocco. Spain. United Kingdom (UK).
- bounds: (-6.0, 0.0, 0.0, 84.0)
Coordinate Operation:
- name: UTM zone 30N
- method: Transverse Mercator
Datum: World Geodetic System 1984 ensemble
- Ellipsoid: WGS 84
- Prime Meridian: Greenwich</code></pre>
</div>
</div>
<p>Coordinate reference systems are referenced by European Petroleum Survey Group (EPSG) codes.</p>
<p>The <code>regions</code> GeoDataFrame uses <code>EPSG 32630</code>, which is more commonly called the “Mercator” projection. This projection preserves angles (making it useful for sea navigation) and slightly distorts area.</p>
<p>However, when creating a GeoDataFrame from a CSV file, we have to set the CRS. EPSG 4326 corresponds to coordinates in latitude and longitude.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a>facilities_df <span class="op">=</span> pd.read_csv(<span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/ghana/ghana/health_facilities.csv"</span>)</span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>facilities <span class="op">=</span> gpd.GeoDataFrame(</span>
<span id="cb23-4"><a href="#cb23-4" aria-hidden="true" tabindex="-1"></a>    facilities_df,</span>
<span id="cb23-5"><a href="#cb23-5" aria-hidden="true" tabindex="-1"></a>    geometry<span class="op">=</span>gpd.points_from_xy(</span>
<span id="cb23-6"><a href="#cb23-6" aria-hidden="true" tabindex="-1"></a>        facilities_df[<span class="st">"Longitude"</span>],</span>
<span id="cb23-7"><a href="#cb23-7" aria-hidden="true" tabindex="-1"></a>        facilities_df[<span class="st">"Latitude"</span>],</span>
<span id="cb23-8"><a href="#cb23-8" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb23-9"><a href="#cb23-9" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="st">"EPSG:4326"</span>,</span>
<span id="cb23-10"><a href="#cb23-10" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb23-11"><a href="#cb23-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" aria-hidden="true" tabindex="-1"></a>facilities</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">District</th>
<th data-quarto-table-cell-role="th">FacilityName</th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Town</th>
<th data-quarto-table-cell-role="th">Ownership</th>
<th data-quarto-table-cell-role="th">Latitude</th>
<th data-quarto-table-cell-role="th">Longitude</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ashanti</td>
<td>Offinso North</td>
<td>A.M.E Zion Clinic</td>
<td>Clinic</td>
<td>Afrancho</td>
<td>CHAG</td>
<td>7.40801</td>
<td>-1.96317</td>
<td>POINT (-1.96317 7.40801)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Ashanti</td>
<td>Bekwai Municipal</td>
<td>Abenkyiman Clinic</td>
<td>Clinic</td>
<td>Anwiankwanta</td>
<td>Private</td>
<td>6.46312</td>
<td>-1.58592</td>
<td>POINT (-1.58592 6.46312)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Ashanti</td>
<td>Adansi North</td>
<td>Aboabo Health Centre</td>
<td>Health Centre</td>
<td>Aboabo No 2</td>
<td>Government</td>
<td>6.22393</td>
<td>-1.34982</td>
<td>POINT (-1.34982 6.22393)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Ashanti</td>
<td>Afigya-Kwabre</td>
<td>Aboabogya Health Centre</td>
<td>Health Centre</td>
<td>Aboabogya</td>
<td>Government</td>
<td>6.84177</td>
<td>-1.61098</td>
<td>POINT (-1.61098 6.84177)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Ashanti</td>
<td>Kwabre</td>
<td>Aboaso Health Centre</td>
<td>Health Centre</td>
<td>Aboaso</td>
<td>Government</td>
<td>6.84177</td>
<td>-1.61098</td>
<td>POINT (-1.61098 6.84177)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3751</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Ackaakrom CHPS</td>
<td>CHPS</td>
<td>Ackaakrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3752</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Apprutu CHPS</td>
<td>CHPS</td>
<td>Apprutu</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3753</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Kojokrom CHPS</td>
<td>CHPS</td>
<td>Kojokrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3754</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Yawkrom CHPS</td>
<td>CHPS</td>
<td>Yawkrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3755</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Kofikrom CHPS</td>
<td>CHPS</td>
<td>Kofikrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
</tbody>
</table>

<p>3756 rows × 9 columns</p>
</div>
</div>
</div>
<p>Re-projecting refers to the process of changing the CRS. This is done in GeoPandas with the <code>to_crs()</code> method. When plotting multiple GeoDataFrames, it’s important that they all use the same CRS. In the code cell below, we change the CRS of the facilities GeoDataFrame to match the CRS of regions before plotting it. The `to_crs()`` method modifies only the “geometry” column: all other columns are left as-is.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a>facilities.to_crs(epsg<span class="op">=</span><span class="dv">32630</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">District</th>
<th data-quarto-table-cell-role="th">FacilityName</th>
<th data-quarto-table-cell-role="th">Type</th>
<th data-quarto-table-cell-role="th">Town</th>
<th data-quarto-table-cell-role="th">Ownership</th>
<th data-quarto-table-cell-role="th">Latitude</th>
<th data-quarto-table-cell-role="th">Longitude</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ashanti</td>
<td>Offinso North</td>
<td>A.M.E Zion Clinic</td>
<td>Clinic</td>
<td>Afrancho</td>
<td>CHAG</td>
<td>7.40801</td>
<td>-1.96317</td>
<td>POINT (614422.662 818986.851)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Ashanti</td>
<td>Bekwai Municipal</td>
<td>Abenkyiman Clinic</td>
<td>Clinic</td>
<td>Anwiankwanta</td>
<td>Private</td>
<td>6.46312</td>
<td>-1.58592</td>
<td>POINT (656373.863 714616.547)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Ashanti</td>
<td>Adansi North</td>
<td>Aboabo Health Centre</td>
<td>Health Centre</td>
<td>Aboabo No 2</td>
<td>Government</td>
<td>6.22393</td>
<td>-1.34982</td>
<td>POINT (682573.395 688243.477)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Ashanti</td>
<td>Afigya-Kwabre</td>
<td>Aboabogya Health Centre</td>
<td>Health Centre</td>
<td>Aboabogya</td>
<td>Government</td>
<td>6.84177</td>
<td>-1.61098</td>
<td>POINT (653484.490 756478.812)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Ashanti</td>
<td>Kwabre</td>
<td>Aboaso Health Centre</td>
<td>Health Centre</td>
<td>Aboaso</td>
<td>Government</td>
<td>6.84177</td>
<td>-1.61098</td>
<td>POINT (653484.490 756478.812)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3751</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Ackaakrom CHPS</td>
<td>CHPS</td>
<td>Ackaakrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3752</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Apprutu CHPS</td>
<td>CHPS</td>
<td>Apprutu</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3753</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Kojokrom CHPS</td>
<td>CHPS</td>
<td>Kojokrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3754</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Yawkrom CHPS</td>
<td>CHPS</td>
<td>Yawkrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">3755</td>
<td>Western</td>
<td>Sefwi-Akontombra</td>
<td>Kofikrom CHPS</td>
<td>CHPS</td>
<td>Kofikrom</td>
<td>Government</td>
<td>NaN</td>
<td>NaN</td>
<td>POINT EMPTY</td>
</tr>
</tbody>
</table>

<p>3756 rows × 9 columns</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a>regions.plot(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>), color<span class="op">=</span><span class="st">"none"</span>, linestyle<span class="op">=</span><span class="st">":"</span>, edgecolor<span class="op">=</span><span class="st">"black"</span>, ax<span class="op">=</span>ax)</span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a>facilities.to_crs(epsg<span class="op">=</span><span class="dv">32630</span>).plot(markersize<span class="op">=</span><span class="dv">1</span>, ax<span class="op">=</span>ax)</span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="01_geopandas_files/figure-html/cell-18-output-1.png" class="img-fluid"></p>
</div>
</div>
<p>In case the EPSG code is not available in GeoPandas, we can change the CRS with what’s known as the “proj4 string” of the CRS. For instance, the proj4 string to convert to latitude/longitude coordinates is as follows:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a>regions.to_crs(<span class="st">"+proj=longlat +ellps=WGS84 +datum=WGS84 +no_defs"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ashanti</td>
<td>POLYGON ((-1.30985 7.62302, -1.30786 7.62198, ...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Brong Ahafo</td>
<td>POLYGON ((-2.54567 8.76089, -2.54473 8.76071, ...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Central</td>
<td>POLYGON ((-2.06723 6.29473, -2.06658 6.29420, ...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Eastern</td>
<td>POLYGON ((-0.21751 7.21009, -0.21747 7.20993, ...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Greater Accra</td>
<td>POLYGON ((0.23456 6.10986, 0.23484 6.10974, 0....</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Northern</td>
<td>POLYGON ((-0.09041 10.71194, -0.09061 10.70918...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Upper East</td>
<td>POLYGON ((-0.14402 11.11730, -0.14393 11.11679...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Upper West</td>
<td>POLYGON ((-1.54582 11.04027, -1.54411 11.01019...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Volta</td>
<td>POLYGON ((0.62403 7.90125, 0.62264 7.90174, 0....</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Western</td>
<td>POLYGON ((-3.08737 6.97758, -3.08573 6.97675, ...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a>regions.loc[:, <span class="st">"area"</span>] <span class="op">=</span> regions[<span class="st">"geometry"</span>].area <span class="op">/</span> <span class="dv">10</span><span class="op">**</span><span class="dv">6</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"Area of Ghana: </span><span class="sc">{</span>regions[<span class="st">'area'</span>]<span class="sc">.</span><span class="bu">sum</span>()<span class="sc">}</span><span class="ss"> square kilometers"</span>)</span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="st">"CRS:"</span>, regions.crs)</span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a>regions</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Area of Ghana: 239584.5760055668 square kilometers
CRS: EPSG:32630</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">Region</th>
<th data-quarto-table-cell-role="th">geometry</th>
<th data-quarto-table-cell-role="th">area</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>Ashanti</td>
<td>POLYGON ((686446.075 842986.894, 686666.193 84...</td>
<td>24379.017777</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>Brong Ahafo</td>
<td>POLYGON ((549970.457 968447.094, 550073.003 96...</td>
<td>40098.168231</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>Central</td>
<td>POLYGON ((603176.584 695877.238, 603248.424 69...</td>
<td>9665.626760</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>Eastern</td>
<td>POLYGON ((807307.254 797910.553, 807311.908 79...</td>
<td>18987.625847</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>Greater Accra</td>
<td>POLYGON ((858081.638 676424.913, 858113.115 67...</td>
<td>3706.511145</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">5</td>
<td>Northern</td>
<td>POLYGON ((818287.468 1185632.455, 818268.664 1...</td>
<td>69830.576358</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">6</td>
<td>Upper East</td>
<td>POLYGON ((811994.328 1230449.528, 812004.699 1...</td>
<td>8629.357677</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">7</td>
<td>Upper West</td>
<td>POLYGON ((658854.315 1220818.656, 659057.210 1...</td>
<td>19022.080963</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">8</td>
<td>Volta</td>
<td>POLYGON ((899718.788 875120.098, 899564.444 87...</td>
<td>20948.296066</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">9</td>
<td>Western</td>
<td>POLYGON ((490349.315 771271.143, 490530.091 77...</td>
<td>24317.315180</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<p>In the code cell above, since the CRS of the regions GeoDataFrame is set to EPSG 32630 (a “Mercator” projection), the area calculation is slightly less accurate than if we had used an equal-area projection like “Africa Albers Equal Area Conic”. But this still yields the area of Ghana as approximately 239585 square kilometers, which is not too far off from the correct answer.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a>birds_df <span class="op">=</span> pd.read_csv(<span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/purple_martin.csv"</span>, parse_dates<span class="op">=</span>[<span class="st">"timestamp"</span>])</span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="ss">f"There are </span><span class="sc">{</span>birds_df[<span class="st">'tag-local-identifier'</span>]<span class="sc">.</span>nunique()<span class="sc">}</span><span class="ss"> different birds in the dataset."</span>)</span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a>birds_df</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>There are 11 different birds in the dataset.</code></pre>
</div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">timestamp</th>
<th data-quarto-table-cell-role="th">location-long</th>
<th data-quarto-table-cell-role="th">location-lat</th>
<th data-quarto-table-cell-role="th">tag-local-identifier</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>2014-08-15 05:56:00</td>
<td>-88.146014</td>
<td>17.513049</td>
<td>30448</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>2014-09-01 05:59:00</td>
<td>-85.243501</td>
<td>13.095782</td>
<td>30448</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>2014-10-30 23:58:00</td>
<td>-62.906089</td>
<td>-7.852436</td>
<td>30448</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>2014-11-15 04:59:00</td>
<td>-61.776826</td>
<td>-11.723898</td>
<td>30448</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>2014-11-30 09:59:00</td>
<td>-61.241538</td>
<td>-11.612237</td>
<td>30448</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">...</td>
<td>...</td>
<td>...</td>
<td>...</td>
<td>...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">94</td>
<td>2014-12-30 19:59:00</td>
<td>-50.709645</td>
<td>-9.572583</td>
<td>30263</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">95</td>
<td>2015-01-14 23:59:00</td>
<td>-49.292113</td>
<td>-8.392265</td>
<td>30263</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">96</td>
<td>2015-01-30 03:59:00</td>
<td>-49.081317</td>
<td>-5.413250</td>
<td>30263</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">97</td>
<td>2015-02-14 07:59:00</td>
<td>-49.081245</td>
<td>-5.413251</td>
<td>30263</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">98</td>
<td>2015-03-01 11:59:00</td>
<td>-50.192297</td>
<td>-5.705042</td>
<td>30263</td>
</tr>
</tbody>
</table>

<p>99 rows × 4 columns</p>
</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a>birds <span class="op">=</span> gpd.GeoDataFrame(</span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a>    birds_df,</span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    geometry<span class="op">=</span>gpd.points_from_xy(</span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>        birds_df[<span class="st">"location-long"</span>],</span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>        birds_df[<span class="st">"location-lat"</span>],</span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    ),</span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>    crs<span class="op">=</span><span class="st">"EPSG:4326"</span>,</span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a>world <span class="op">=</span> gpd.read_file(<span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/ne_110m_admin_0_countries/ne_110m_admin_0_countries.shp"</span>)</span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a>americas <span class="op">=</span> world.loc[world[<span class="st">"CONTINENT"</span>].isin([<span class="st">"North America"</span>, <span class="st">"South America"</span>])]</span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a>americas.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">featurecla</th>
<th data-quarto-table-cell-role="th">scalerank</th>
<th data-quarto-table-cell-role="th">LABELRANK</th>
<th data-quarto-table-cell-role="th">SOVEREIGNT</th>
<th data-quarto-table-cell-role="th">SOV_A3</th>
<th data-quarto-table-cell-role="th">ADM0_DIF</th>
<th data-quarto-table-cell-role="th">LEVEL</th>
<th data-quarto-table-cell-role="th">TYPE</th>
<th data-quarto-table-cell-role="th">TLC</th>
<th data-quarto-table-cell-role="th">ADMIN</th>
<th data-quarto-table-cell-role="th">ADM0_A3</th>
<th data-quarto-table-cell-role="th">GEOU_DIF</th>
<th data-quarto-table-cell-role="th">GEOUNIT</th>
<th data-quarto-table-cell-role="th">GU_A3</th>
<th data-quarto-table-cell-role="th">SU_DIF</th>
<th data-quarto-table-cell-role="th">SUBUNIT</th>
<th data-quarto-table-cell-role="th">SU_A3</th>
<th data-quarto-table-cell-role="th">BRK_DIFF</th>
<th data-quarto-table-cell-role="th">NAME</th>
<th data-quarto-table-cell-role="th">NAME_LONG</th>
<th data-quarto-table-cell-role="th">BRK_A3</th>
<th data-quarto-table-cell-role="th">BRK_NAME</th>
<th data-quarto-table-cell-role="th">BRK_GROUP</th>
<th data-quarto-table-cell-role="th">ABBREV</th>
<th data-quarto-table-cell-role="th">POSTAL</th>
<th data-quarto-table-cell-role="th">FORMAL_EN</th>
<th data-quarto-table-cell-role="th">FORMAL_FR</th>
<th data-quarto-table-cell-role="th">NAME_CIAWF</th>
<th data-quarto-table-cell-role="th">NOTE_ADM0</th>
<th data-quarto-table-cell-role="th">NOTE_BRK</th>
<th data-quarto-table-cell-role="th">NAME_SORT</th>
<th data-quarto-table-cell-role="th">NAME_ALT</th>
<th data-quarto-table-cell-role="th">MAPCOLOR7</th>
<th data-quarto-table-cell-role="th">MAPCOLOR8</th>
<th data-quarto-table-cell-role="th">MAPCOLOR9</th>
<th data-quarto-table-cell-role="th">MAPCOLOR13</th>
<th data-quarto-table-cell-role="th">POP_EST</th>
<th data-quarto-table-cell-role="th">POP_RANK</th>
<th data-quarto-table-cell-role="th">POP_YEAR</th>
<th data-quarto-table-cell-role="th">GDP_MD</th>
<th data-quarto-table-cell-role="th">GDP_YEAR</th>
<th data-quarto-table-cell-role="th">ECONOMY</th>
<th data-quarto-table-cell-role="th">INCOME_GRP</th>
<th data-quarto-table-cell-role="th">FIPS_10</th>
<th data-quarto-table-cell-role="th">ISO_A2</th>
<th data-quarto-table-cell-role="th">ISO_A2_EH</th>
<th data-quarto-table-cell-role="th">ISO_A3</th>
<th data-quarto-table-cell-role="th">ISO_A3_EH</th>
<th data-quarto-table-cell-role="th">ISO_N3</th>
<th data-quarto-table-cell-role="th">ISO_N3_EH</th>
<th data-quarto-table-cell-role="th">UN_A3</th>
<th data-quarto-table-cell-role="th">WB_A2</th>
<th data-quarto-table-cell-role="th">WB_A3</th>
<th data-quarto-table-cell-role="th">WOE_ID</th>
<th data-quarto-table-cell-role="th">WOE_ID_EH</th>
<th data-quarto-table-cell-role="th">WOE_NOTE</th>
<th data-quarto-table-cell-role="th">ADM0_ISO</th>
<th data-quarto-table-cell-role="th">ADM0_DIFF</th>
<th data-quarto-table-cell-role="th">ADM0_TLC</th>
<th data-quarto-table-cell-role="th">ADM0_A3_US</th>
<th data-quarto-table-cell-role="th">ADM0_A3_FR</th>
<th data-quarto-table-cell-role="th">ADM0_A3_RU</th>
<th data-quarto-table-cell-role="th">ADM0_A3_ES</th>
<th data-quarto-table-cell-role="th">ADM0_A3_CN</th>
<th data-quarto-table-cell-role="th">ADM0_A3_TW</th>
<th data-quarto-table-cell-role="th">ADM0_A3_IN</th>
<th data-quarto-table-cell-role="th">ADM0_A3_NP</th>
<th data-quarto-table-cell-role="th">ADM0_A3_PK</th>
<th data-quarto-table-cell-role="th">ADM0_A3_DE</th>
<th data-quarto-table-cell-role="th">ADM0_A3_GB</th>
<th data-quarto-table-cell-role="th">ADM0_A3_BR</th>
<th data-quarto-table-cell-role="th">ADM0_A3_IL</th>
<th data-quarto-table-cell-role="th">ADM0_A3_PS</th>
<th data-quarto-table-cell-role="th">ADM0_A3_SA</th>
<th data-quarto-table-cell-role="th">ADM0_A3_EG</th>
<th data-quarto-table-cell-role="th">ADM0_A3_MA</th>
<th data-quarto-table-cell-role="th">ADM0_A3_PT</th>
<th data-quarto-table-cell-role="th">ADM0_A3_AR</th>
<th data-quarto-table-cell-role="th">ADM0_A3_JP</th>
<th data-quarto-table-cell-role="th">ADM0_A3_KO</th>
<th data-quarto-table-cell-role="th">ADM0_A3_VN</th>
<th data-quarto-table-cell-role="th">ADM0_A3_TR</th>
<th data-quarto-table-cell-role="th">ADM0_A3_ID</th>
<th data-quarto-table-cell-role="th">ADM0_A3_PL</th>
<th data-quarto-table-cell-role="th">ADM0_A3_GR</th>
<th data-quarto-table-cell-role="th">ADM0_A3_IT</th>
<th data-quarto-table-cell-role="th">ADM0_A3_NL</th>
<th data-quarto-table-cell-role="th">ADM0_A3_SE</th>
<th data-quarto-table-cell-role="th">ADM0_A3_BD</th>
<th data-quarto-table-cell-role="th">ADM0_A3_UA</th>
<th data-quarto-table-cell-role="th">ADM0_A3_UN</th>
<th data-quarto-table-cell-role="th">ADM0_A3_WB</th>
<th data-quarto-table-cell-role="th">CONTINENT</th>
<th data-quarto-table-cell-role="th">REGION_UN</th>
<th data-quarto-table-cell-role="th">SUBREGION</th>
<th data-quarto-table-cell-role="th">REGION_WB</th>
<th data-quarto-table-cell-role="th">NAME_LEN</th>
<th data-quarto-table-cell-role="th">LONG_LEN</th>
<th data-quarto-table-cell-role="th">ABBREV_LEN</th>
<th data-quarto-table-cell-role="th">TINY</th>
<th data-quarto-table-cell-role="th">HOMEPART</th>
<th data-quarto-table-cell-role="th">MIN_ZOOM</th>
<th data-quarto-table-cell-role="th">MIN_LABEL</th>
<th data-quarto-table-cell-role="th">MAX_LABEL</th>
<th data-quarto-table-cell-role="th">LABEL_X</th>
<th data-quarto-table-cell-role="th">LABEL_Y</th>
<th data-quarto-table-cell-role="th">NE_ID</th>
<th data-quarto-table-cell-role="th">WIKIDATAID</th>
<th data-quarto-table-cell-role="th">NAME_AR</th>
<th data-quarto-table-cell-role="th">NAME_BN</th>
<th data-quarto-table-cell-role="th">NAME_DE</th>
<th data-quarto-table-cell-role="th">NAME_EN</th>
<th data-quarto-table-cell-role="th">NAME_ES</th>
<th data-quarto-table-cell-role="th">NAME_FA</th>
<th data-quarto-table-cell-role="th">NAME_FR</th>
<th data-quarto-table-cell-role="th">NAME_EL</th>
<th data-quarto-table-cell-role="th">NAME_HE</th>
<th data-quarto-table-cell-role="th">NAME_HI</th>
<th data-quarto-table-cell-role="th">NAME_HU</th>
<th data-quarto-table-cell-role="th">NAME_ID</th>
<th data-quarto-table-cell-role="th">NAME_IT</th>
<th data-quarto-table-cell-role="th">NAME_JA</th>
<th data-quarto-table-cell-role="th">NAME_KO</th>
<th data-quarto-table-cell-role="th">NAME_NL</th>
<th data-quarto-table-cell-role="th">NAME_PL</th>
<th data-quarto-table-cell-role="th">NAME_PT</th>
<th data-quarto-table-cell-role="th">NAME_RU</th>
<th data-quarto-table-cell-role="th">NAME_SV</th>
<th data-quarto-table-cell-role="th">NAME_TR</th>
<th data-quarto-table-cell-role="th">NAME_UK</th>
<th data-quarto-table-cell-role="th">NAME_UR</th>
<th data-quarto-table-cell-role="th">NAME_VI</th>
<th data-quarto-table-cell-role="th">NAME_ZH</th>
<th data-quarto-table-cell-role="th">NAME_ZHT</th>
<th data-quarto-table-cell-role="th">FCLASS_ISO</th>
<th data-quarto-table-cell-role="th">TLC_DIFF</th>
<th data-quarto-table-cell-role="th">FCLASS_TLC</th>
<th data-quarto-table-cell-role="th">FCLASS_US</th>
<th data-quarto-table-cell-role="th">FCLASS_FR</th>
<th data-quarto-table-cell-role="th">FCLASS_RU</th>
<th data-quarto-table-cell-role="th">FCLASS_ES</th>
<th data-quarto-table-cell-role="th">FCLASS_CN</th>
<th data-quarto-table-cell-role="th">FCLASS_TW</th>
<th data-quarto-table-cell-role="th">FCLASS_IN</th>
<th data-quarto-table-cell-role="th">FCLASS_NP</th>
<th data-quarto-table-cell-role="th">FCLASS_PK</th>
<th data-quarto-table-cell-role="th">FCLASS_DE</th>
<th data-quarto-table-cell-role="th">FCLASS_GB</th>
<th data-quarto-table-cell-role="th">FCLASS_BR</th>
<th data-quarto-table-cell-role="th">FCLASS_IL</th>
<th data-quarto-table-cell-role="th">FCLASS_PS</th>
<th data-quarto-table-cell-role="th">FCLASS_SA</th>
<th data-quarto-table-cell-role="th">FCLASS_EG</th>
<th data-quarto-table-cell-role="th">FCLASS_MA</th>
<th data-quarto-table-cell-role="th">FCLASS_PT</th>
<th data-quarto-table-cell-role="th">FCLASS_AR</th>
<th data-quarto-table-cell-role="th">FCLASS_JP</th>
<th data-quarto-table-cell-role="th">FCLASS_KO</th>
<th data-quarto-table-cell-role="th">FCLASS_VN</th>
<th data-quarto-table-cell-role="th">FCLASS_TR</th>
<th data-quarto-table-cell-role="th">FCLASS_ID</th>
<th data-quarto-table-cell-role="th">FCLASS_PL</th>
<th data-quarto-table-cell-role="th">FCLASS_GR</th>
<th data-quarto-table-cell-role="th">FCLASS_IT</th>
<th data-quarto-table-cell-role="th">FCLASS_NL</th>
<th data-quarto-table-cell-role="th">FCLASS_SE</th>
<th data-quarto-table-cell-role="th">FCLASS_BD</th>
<th data-quarto-table-cell-role="th">FCLASS_UA</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">3</td>
<td>Admin-0 country</td>
<td>1</td>
<td>2</td>
<td>Canada</td>
<td>CAN</td>
<td>0</td>
<td>2</td>
<td>Sovereign country</td>
<td>1</td>
<td>Canada</td>
<td>CAN</td>
<td>0</td>
<td>Canada</td>
<td>CAN</td>
<td>0</td>
<td>Canada</td>
<td>CAN</td>
<td>0</td>
<td>Canada</td>
<td>Canada</td>
<td>CAN</td>
<td>Canada</td>
<td>NaN</td>
<td>Can.</td>
<td>CA</td>
<td>Canada</td>
<td>NaN</td>
<td>Canada</td>
<td>NaN</td>
<td>NaN</td>
<td>Canada</td>
<td>NaN</td>
<td>6</td>
<td>6</td>
<td>2</td>
<td>2</td>
<td>37589262.0</td>
<td>15</td>
<td>2019</td>
<td>1736425</td>
<td>2019</td>
<td>1. Developed region: G7</td>
<td>1. High income: OECD</td>
<td>CA</td>
<td>CA</td>
<td>CA</td>
<td>CAN</td>
<td>CAN</td>
<td>124</td>
<td>124</td>
<td>124</td>
<td>CA</td>
<td>CAN</td>
<td>23424775</td>
<td>23424775</td>
<td>Exact WOE match as country</td>
<td>CAN</td>
<td>NaN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>CAN</td>
<td>-99</td>
<td>-99</td>
<td>North America</td>
<td>Americas</td>
<td>Northern America</td>
<td>North America</td>
<td>6</td>
<td>6</td>
<td>4</td>
<td>-99</td>
<td>1</td>
<td>0.0</td>
<td>1.7</td>
<td>5.7</td>
<td>-101.910700</td>
<td>60.324287</td>
<td>1159320467</td>
<td>Q16</td>
<td>كندا</td>
<td>কানাডা</td>
<td>Kanada</td>
<td>Canada</td>
<td>Canadá</td>
<td>کانادا</td>
<td>Canada</td>
<td>Καναδάς</td>
<td>קנדה</td>
<td>कनाडा</td>
<td>Kanada</td>
<td>Kanada</td>
<td>Canada</td>
<td>カナダ</td>
<td>캐나다</td>
<td>Canada</td>
<td>Kanada</td>
<td>Canadá</td>
<td>Канада</td>
<td>Kanada</td>
<td>Kanada</td>
<td>Канада</td>
<td>کینیڈا</td>
<td>Canada</td>
<td>加拿大</td>
<td>加拿大</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-122.84000 49.00000, -122.9742...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">4</td>
<td>Admin-0 country</td>
<td>1</td>
<td>2</td>
<td>United States of America</td>
<td>US1</td>
<td>1</td>
<td>2</td>
<td>Country</td>
<td>1</td>
<td>United States of America</td>
<td>USA</td>
<td>0</td>
<td>United States of America</td>
<td>USA</td>
<td>0</td>
<td>United States</td>
<td>USA</td>
<td>0</td>
<td>United States of America</td>
<td>United States</td>
<td>USA</td>
<td>United States</td>
<td>NaN</td>
<td>U.S.A.</td>
<td>US</td>
<td>United States of America</td>
<td>NaN</td>
<td>United States</td>
<td>NaN</td>
<td>NaN</td>
<td>United States of America</td>
<td>NaN</td>
<td>4</td>
<td>5</td>
<td>1</td>
<td>1</td>
<td>328239523.0</td>
<td>17</td>
<td>2019</td>
<td>21433226</td>
<td>2019</td>
<td>1. Developed region: G7</td>
<td>1. High income: OECD</td>
<td>US</td>
<td>US</td>
<td>US</td>
<td>USA</td>
<td>USA</td>
<td>840</td>
<td>840</td>
<td>840</td>
<td>US</td>
<td>USA</td>
<td>23424977</td>
<td>23424977</td>
<td>Exact WOE match as country</td>
<td>USA</td>
<td>NaN</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>USA</td>
<td>-99</td>
<td>-99</td>
<td>North America</td>
<td>Americas</td>
<td>Northern America</td>
<td>North America</td>
<td>24</td>
<td>13</td>
<td>6</td>
<td>-99</td>
<td>1</td>
<td>0.0</td>
<td>1.7</td>
<td>5.7</td>
<td>-97.482602</td>
<td>39.538479</td>
<td>1159321369</td>
<td>Q30</td>
<td>الولايات المتحدة</td>
<td>মার্কিন যুক্তরাষ্ট্র</td>
<td>Vereinigte Staaten</td>
<td>United States of America</td>
<td>Estados Unidos</td>
<td>ایالات متحده آمریکا</td>
<td>États-Unis</td>
<td>Ηνωμένες Πολιτείες Αμερικής</td>
<td>ארצות הברית</td>
<td>संयुक्त राज्य अमेरिका</td>
<td>Amerikai Egyesült Államok</td>
<td>Amerika Serikat</td>
<td>Stati Uniti d'America</td>
<td>アメリカ合衆国</td>
<td>미국</td>
<td>Verenigde Staten van Amerika</td>
<td>Stany Zjednoczone</td>
<td>Estados Unidos</td>
<td>США</td>
<td>USA</td>
<td>Amerika Birleşik Devletleri</td>
<td>Сполучені Штати Америки</td>
<td>ریاستہائے متحدہ امریکا</td>
<td>Hoa Kỳ</td>
<td>美国</td>
<td>美國</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-122.84000 49.00000, -120.0000...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">9</td>
<td>Admin-0 country</td>
<td>1</td>
<td>2</td>
<td>Argentina</td>
<td>ARG</td>
<td>0</td>
<td>2</td>
<td>Sovereign country</td>
<td>1</td>
<td>Argentina</td>
<td>ARG</td>
<td>0</td>
<td>Argentina</td>
<td>ARG</td>
<td>0</td>
<td>Argentina</td>
<td>ARG</td>
<td>0</td>
<td>Argentina</td>
<td>Argentina</td>
<td>ARG</td>
<td>Argentina</td>
<td>NaN</td>
<td>Arg.</td>
<td>AR</td>
<td>Argentine Republic</td>
<td>NaN</td>
<td>Argentina</td>
<td>NaN</td>
<td>NaN</td>
<td>Argentina</td>
<td>NaN</td>
<td>3</td>
<td>1</td>
<td>3</td>
<td>13</td>
<td>44938712.0</td>
<td>15</td>
<td>2019</td>
<td>445445</td>
<td>2019</td>
<td>5. Emerging region: G20</td>
<td>3. Upper middle income</td>
<td>AR</td>
<td>AR</td>
<td>AR</td>
<td>ARG</td>
<td>ARG</td>
<td>032</td>
<td>032</td>
<td>032</td>
<td>AR</td>
<td>ARG</td>
<td>23424747</td>
<td>23424747</td>
<td>Exact WOE match as country</td>
<td>ARG</td>
<td>NaN</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>ARG</td>
<td>-99</td>
<td>-99</td>
<td>South America</td>
<td>Americas</td>
<td>South America</td>
<td>Latin America &amp; Caribbean</td>
<td>9</td>
<td>9</td>
<td>4</td>
<td>-99</td>
<td>1</td>
<td>0.0</td>
<td>2.0</td>
<td>7.0</td>
<td>-64.173331</td>
<td>-33.501159</td>
<td>1159320331</td>
<td>Q414</td>
<td>الأرجنتين</td>
<td>আর্জেন্টিনা</td>
<td>Argentinien</td>
<td>Argentina</td>
<td>Argentina</td>
<td>آرژانتین</td>
<td>Argentine</td>
<td>Αργεντινή</td>
<td>ארגנטינה</td>
<td>अर्जेण्टीना</td>
<td>Argentína</td>
<td>Argentina</td>
<td>Argentina</td>
<td>アルゼンチン</td>
<td>아르헨티나</td>
<td>Argentinië</td>
<td>Argentyna</td>
<td>Argentina</td>
<td>Аргентина</td>
<td>Argentina</td>
<td>Arjantin</td>
<td>Аргентина</td>
<td>ارجنٹائن</td>
<td>Argentina</td>
<td>阿根廷</td>
<td>阿根廷</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-68.63401 -52.63637, -68.25000...</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">10</td>
<td>Admin-0 country</td>
<td>1</td>
<td>2</td>
<td>Chile</td>
<td>CHL</td>
<td>0</td>
<td>2</td>
<td>Sovereign country</td>
<td>1</td>
<td>Chile</td>
<td>CHL</td>
<td>0</td>
<td>Chile</td>
<td>CHL</td>
<td>0</td>
<td>Chile</td>
<td>CHL</td>
<td>0</td>
<td>Chile</td>
<td>Chile</td>
<td>CHL</td>
<td>Chile</td>
<td>NaN</td>
<td>Chile</td>
<td>CL</td>
<td>Republic of Chile</td>
<td>NaN</td>
<td>Chile</td>
<td>NaN</td>
<td>NaN</td>
<td>Chile</td>
<td>NaN</td>
<td>5</td>
<td>1</td>
<td>5</td>
<td>9</td>
<td>18952038.0</td>
<td>14</td>
<td>2019</td>
<td>282318</td>
<td>2019</td>
<td>5. Emerging region: G20</td>
<td>3. Upper middle income</td>
<td>CI</td>
<td>CL</td>
<td>CL</td>
<td>CHL</td>
<td>CHL</td>
<td>152</td>
<td>152</td>
<td>152</td>
<td>CL</td>
<td>CHL</td>
<td>23424782</td>
<td>23424782</td>
<td>Exact WOE match as country</td>
<td>CHL</td>
<td>NaN</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>CHL</td>
<td>-99</td>
<td>-99</td>
<td>South America</td>
<td>Americas</td>
<td>South America</td>
<td>Latin America &amp; Caribbean</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>-99</td>
<td>1</td>
<td>0.0</td>
<td>1.7</td>
<td>6.7</td>
<td>-72.318871</td>
<td>-38.151771</td>
<td>1159320493</td>
<td>Q298</td>
<td>تشيلي</td>
<td>চিলি</td>
<td>Chile</td>
<td>Chile</td>
<td>Chile</td>
<td>شیلی</td>
<td>Chili</td>
<td>Χιλή</td>
<td>צ'ילה</td>
<td>चिली</td>
<td>Chile</td>
<td>Chili</td>
<td>Cile</td>
<td>チリ</td>
<td>칠레</td>
<td>Chili</td>
<td>Chile</td>
<td>Chile</td>
<td>Чили</td>
<td>Chile</td>
<td>Şili</td>
<td>Чилі</td>
<td>چلی</td>
<td>Chile</td>
<td>智利</td>
<td>智利</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>MULTIPOLYGON (((-68.63401 -52.63637, -68.63335...</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">16</td>
<td>Admin-0 country</td>
<td>1</td>
<td>5</td>
<td>Haiti</td>
<td>HTI</td>
<td>0</td>
<td>2</td>
<td>Sovereign country</td>
<td>1</td>
<td>Haiti</td>
<td>HTI</td>
<td>0</td>
<td>Haiti</td>
<td>HTI</td>
<td>0</td>
<td>Haiti</td>
<td>HTI</td>
<td>0</td>
<td>Haiti</td>
<td>Haiti</td>
<td>HTI</td>
<td>Haiti</td>
<td>NaN</td>
<td>Haiti</td>
<td>HT</td>
<td>Republic of Haiti</td>
<td>NaN</td>
<td>Haiti</td>
<td>NaN</td>
<td>NaN</td>
<td>Haiti</td>
<td>NaN</td>
<td>2</td>
<td>1</td>
<td>7</td>
<td>2</td>
<td>11263077.0</td>
<td>14</td>
<td>2019</td>
<td>14332</td>
<td>2019</td>
<td>7. Least developed region</td>
<td>5. Low income</td>
<td>HA</td>
<td>HT</td>
<td>HT</td>
<td>HTI</td>
<td>HTI</td>
<td>332</td>
<td>332</td>
<td>332</td>
<td>HT</td>
<td>HTI</td>
<td>23424839</td>
<td>23424839</td>
<td>Exact WOE match as country</td>
<td>HTI</td>
<td>NaN</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>HTI</td>
<td>-99</td>
<td>-99</td>
<td>North America</td>
<td>Americas</td>
<td>Caribbean</td>
<td>Latin America &amp; Caribbean</td>
<td>5</td>
<td>5</td>
<td>5</td>
<td>-99</td>
<td>1</td>
<td>0.0</td>
<td>4.0</td>
<td>9.0</td>
<td>-72.224051</td>
<td>19.263784</td>
<td>1159320839</td>
<td>Q790</td>
<td>هايتي</td>
<td>হাইতি</td>
<td>Haiti</td>
<td>Haiti</td>
<td>Haití</td>
<td>هائیتی</td>
<td>Haïti</td>
<td>Αϊτή</td>
<td>האיטי</td>
<td>हैती</td>
<td>Haiti</td>
<td>Haiti</td>
<td>Haiti</td>
<td>ハイチ</td>
<td>아이티</td>
<td>Haïti</td>
<td>Haiti</td>
<td>Haiti</td>
<td>Республика Гаити</td>
<td>Haiti</td>
<td>Haiti</td>
<td>Гаїті</td>
<td>ہیٹی</td>
<td>Haiti</td>
<td>海地</td>
<td>海地</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>Admin-0 country</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>NaN</td>
<td>POLYGON ((-71.71236 19.71446, -71.62487 19.169...</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="co"># GeoDataFrame showing path for each bird</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a>path_df <span class="op">=</span> birds.groupby(<span class="st">"tag-local-identifier"</span>)[<span class="st">"geometry"</span>].<span class="bu">apply</span>(<span class="bu">list</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: LineString(x)).reset_index()</span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>path_gdf <span class="op">=</span> gpd.GeoDataFrame(path_df, geometry<span class="op">=</span>path_df.geometry, crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a><span class="co"># GeoDataFrame showing starting point for each bird</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>start_df <span class="op">=</span> birds.groupby(<span class="st">"tag-local-identifier"</span>)[<span class="st">"geometry"</span>].<span class="bu">apply</span>(<span class="bu">list</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="dv">0</span>]).reset_index()</span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>start_gdf <span class="op">=</span> gpd.GeoDataFrame(start_df, geometry<span class="op">=</span>start_df.geometry, crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a>end_df <span class="op">=</span> birds.groupby(<span class="st">"tag-local-identifier"</span>)[<span class="st">"geometry"</span>].<span class="bu">apply</span>(<span class="bu">list</span>).<span class="bu">apply</span>(<span class="kw">lambda</span> x: x[<span class="op">-</span><span class="dv">1</span>]).reset_index()</span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a>end_gdf <span class="op">=</span> gpd.GeoDataFrame(end_df, geometry<span class="op">=</span>end_df.geometry, crs<span class="op">=</span><span class="st">"EPSG:4326"</span>)</span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a><span class="co"># Show first five rows of GeoDataFrame</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>start_gdf.head()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div>


<table class="dataframe table table-sm table-striped small" data-quarto-postprocess="true" data-border="1">
<thead>
<tr class="header">
<th data-quarto-table-cell-role="th"></th>
<th data-quarto-table-cell-role="th">tag-local-identifier</th>
<th data-quarto-table-cell-role="th">geometry</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td data-quarto-table-cell-role="th">0</td>
<td>30048</td>
<td>POINT (-90.12992 20.73242)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">1</td>
<td>30054</td>
<td>POINT (-93.60861 46.50563)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">2</td>
<td>30198</td>
<td>POINT (-80.31036 25.92545)</td>
</tr>
<tr class="even">
<td data-quarto-table-cell-role="th">3</td>
<td>30263</td>
<td>POINT (-76.78146 42.99209)</td>
</tr>
<tr class="odd">
<td data-quarto-table-cell-role="th">4</td>
<td>30275</td>
<td>POINT (-76.78213 42.99207)</td>
</tr>
</tbody>
</table>

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a>americas.plot(color<span class="op">=</span><span class="st">"none"</span>, ax<span class="op">=</span>ax)</span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>start_gdf.plot(ax<span class="op">=</span>ax, cmap<span class="op">=</span><span class="st">"tab20b"</span>, markersize<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>path_gdf.plot(ax<span class="op">=</span>ax, cmap<span class="op">=</span><span class="st">"tab20b"</span>, linestyle<span class="op">=</span><span class="st">"-"</span>, linewidth<span class="op">=</span><span class="dv">1</span>, zorder<span class="op">=</span><span class="dv">1</span>)</span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>end_gdf.plot(ax<span class="op">=</span>ax, cmap<span class="op">=</span><span class="st">"tab20b"</span>, markersize<span class="op">=</span><span class="dv">30</span>)</span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="01_geopandas_files/figure-html/cell-25-output-1.png" class="img-fluid"></p>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a>south_america <span class="op">=</span> world.loc[world[<span class="st">"CONTINENT"</span>] <span class="op">==</span> <span class="st">"South America"</span>]</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a>total_area <span class="op">=</span> south_america[<span class="st">"geometry"</span>].to_crs(epsg<span class="op">=</span><span class="dv">3035</span>).area.<span class="bu">sum</span>() <span class="op">/</span> <span class="dv">10</span><span class="op">**</span><span class="dv">6</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(total_area)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>17759005.815061226</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a>protected_areas <span class="op">=</span> gpd.read_file(</span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a>    <span class="ss">f"</span><span class="sc">{</span>PROJECT_ROOT<span class="sc">}</span><span class="ss">/data/kaggle_geospatial/SAPA_Aug2019-shapefile/SAPA_Aug2019-shapefile/SAPA_Aug2019-shapefile-polygons.shp"</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb39"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a>protected_area <span class="op">=</span> <span class="bu">sum</span>(protected_areas[<span class="st">"REP_AREA"</span>] <span class="op">-</span> protected_areas[<span class="st">"REP_M_AREA"</span>])</span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(protected_area)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>5396761.9116883585</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a>percentage_protected <span class="op">=</span> protected_area <span class="op">/</span> total_area</span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">print</span>(<span class="bu">round</span>(percentage_protected <span class="op">*</span> <span class="dv">100</span>, <span class="dv">2</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>30.39</code></pre>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode python code-with-copy"><code class="sourceCode python"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a>protected_land_areas <span class="op">=</span> protected_areas[protected_areas[<span class="st">"MARINE"</span>] <span class="op">!=</span> <span class="st">"2"</span>]</span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a>fig, ax <span class="op">=</span> plt.subplots(figsize<span class="op">=</span>(<span class="dv">8</span>, <span class="dv">8</span>))</span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a>south_america.plot(color<span class="op">=</span><span class="st">"none"</span>, ax<span class="op">=</span>ax)</span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>protected_land_areas.plot(ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">"green"</span>, alpha<span class="op">=</span><span class="fl">0.5</span>)</span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>birds[birds[<span class="st">"geometry"</span>].y <span class="op">&lt;</span> <span class="dv">0</span>].plot(ax<span class="op">=</span>ax, color<span class="op">=</span><span class="st">"red"</span>, markersize<span class="op">=</span><span class="dv">10</span>)</span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>ax.set_axis_off()</span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>plt.show()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<p><img src="01_geopandas_files/figure-html/cell-31-output-1.png" class="img-fluid"></p>
</div>
</div>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>